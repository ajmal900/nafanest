<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nafanest - Investment Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
        }
        .hero-section {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 4rem 0;
        }
        .plan-card {
            border-radius: 10px;
            transition: all 0.3s;
            border: 1px solid rgba(0,0,0,0.1);
        }
        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .nav-tabs .nav-link.active {
            font-weight: bold;
            border-bottom: 3px solid var(--primary);
        }
        .dashboard-card {
            border-radius: 10px;
            color: white;
        }
        .balance-card {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
        }
        .profit-card {
            background: linear-gradient(135deg, #43e97b, #38f9d7);
        }
        .team-card {
            background: linear-gradient(135deg, #a18cd1, #fbc2eb);
        }
        .investment-card {
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
        }
        #logout-btn {
            display: none;
        }
        .team-member {
            border-left: 3px solid var(--primary);
            padding-left: 15px;
            margin-bottom: 10px;
        }
        .team-member.active {
            background-color: rgba(108, 92, 231, 0.1);
        }
        .referral-status {
            font-size: 0.8rem;
            color: #28a745;
        }
        .plan-selected {
            border: 2px solid var(--primary);
            background-color: rgba(108, 92, 231, 0.05);
        }
        .referral-success {
            background-color: rgba(40, 167, 69, 0.1);
            border: 1px solid #28a745;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
        }
        .referral-error {
            background-color: rgba(220, 53, 69, 0.1);
            border: 1px solid #dc3545;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: var(--primary);">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">Nafanest</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="home-tab">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="dashboard-tab">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="deposit-tab">Deposit</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="withdraw-tab">Withdraw</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="support-tab">Support</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="login-tab">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="register-tab">Register</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="logout-btn">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Home Page Content -->
    <div id="home-content" class="tab-content">
        <!-- Hero Section -->
        <section class="hero-section text-center">
            <div class="container">
                <h1 class="display-4 fw-bold mb-3">A place to grow your money</h1>
                <p class="lead mb-4">Join thousands of investors earning daily returns with our secure platform</p>
                <a href="#" class="btn btn-light btn-lg px-4 me-2" id="register-hero-btn">Get Started</a>
                <a href="#" class="btn btn-outline-light btn-lg px-4" id="login-hero-btn">Login</a>
            </div>
        </section>

        <!-- About Section -->
        <section class="py-5">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <h2 class="fw-bold mb-4">About Nafanest</h2>
                        <p class="lead">Nafanest is a trusted investment platform helping people grow their money through cryptocurrency investments.</p>
                        <p>Our automated system ensures you earn daily returns on your investments with complete transparency and security.</p>
                        <div class="mt-4">
                            <h5 class="fw-bold"><i class="bi bi-people-fill me-2"></i> Referral Program</h5>
                            <p>Invite friends and earn <span class="badge bg-success">5% commission</span> on every deposit they make!</p>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <img src="https://cdn.glitch.global/c8cba390-ff4c-40b7-b8cb-45b8e019cb7b/ChatGPT%20Image%20May%2030%2C%202025%2C%2006_38_00%20PM.png?v=1748662931662" alt="About Nafanest" class="img-fluid rounded">
                    </div>
                </div>
            </div>
        </section>

        <!-- ROI Plans Section -->
        <section class="py-5 bg-light">
            <div class="container">
                <h2 class="text-center fw-bold mb-5">Our Investment Plans</h2>
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="plan-card p-4 text-center h-100" id="basic-plan">
                            <h3 class="fw-bold">Basic Plan</h3>
                            <h4 class="my-3">$50 - $499</h4>
                            <div class="bg-primary bg-opacity-10 p-3 rounded mb-3">
                                <h5 class="text-primary">1.2% - 1.5% Daily ROI</h5>
                                <p class="mb-0">For 30 days</p>
                            </div>
                            <ul class="list-unstyled text-start mb-4">
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Principal returned after plan</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> 24/7 Support</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Instant withdrawals</li>
                                <li class="mb-2"><i class="bi bi-gift-fill text-info me-2"></i> Referral earnings: 5%</li>
                            </ul>
                            <a href="#" class="btn btn-primary w-100 select-plan-btn" data-plan="basic">Invest Now</a>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="plan-card p-4 text-center h-100" id="premium-plan">
                            <h3 class="fw-bold">Premium Plan</h3>
                            <h4 class="my-3">$500 - $4999</h4>
                            <div class="bg-primary bg-opacity-10 p-3 rounded mb-3">
                                <h5 class="text-primary">1.8% - 2.2% Daily ROI</h5>
                                <p class="mb-0">For 45 days</p>
                            </div>
                            <ul class="list-unstyled text-start mb-4">
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Principal returned after plan</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Priority support</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Instant withdrawals</li>
                                <li class="mb-2"><i class="bi bi-gift-fill text-info me-2"></i> Referral earnings: 5%</li>
                            </ul>
                            <a href="#" class="btn btn-primary w-100 select-plan-btn" data-plan="premium">Invest Now</a>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="plan-card p-4 text-center h-100" id="vip-plan">
                            <h3 class="fw-bold">VIP Plan</h3>
                            <h4 class="my-3">$5000+</h4>
                            <div class="bg-primary bg-opacity-10 p-3 rounded mb-3">
                                <h5 class="text-primary">2.5% - 3.0% Daily ROI</h5>
                                <p class="mb-0">For 60 days</p>
                            </div>
                            <ul class="list-unstyled text-start mb-4">
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Principal returned after plan</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> VIP support</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Instant withdrawals</li>
                                <li class="mb-2"><i class="bi bi-gift-fill text-info me-2"></i> Referral earnings: 5%</li>
                            </ul>
                            <a href="#" class="btn btn-primary w-100 select-plan-btn" data-plan="vip">Invest Now</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Dashboard Content -->
    <div id="dashboard-content" class="tab-content" style="display: none;">
        <div class="container py-5">
            <h2 class="fw-bold mb-4">Dashboard</h2>
            <div class="row g-4 mb-4">
                <div class="col-md-3">
                    <div class="dashboard-card balance-card p-4">
                        <h5>Total Balance</h5>
                        <h2>$<span id="total-balance">0.00</span></h2>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="dashboard-card profit-card p-4">
                        <h5>Daily Profit</h5>
                        <h2>$<span id="daily-profit">0.00</span></h2>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="dashboard-card team-card p-4">
                        <h5>Team Earnings</h5>
                        <h2>$<span id="team-earnings">0.00</span></h2>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="dashboard-card investment-card p-4">
                        <h5>Total Invested</h5>
                        <h2>$<span id="total-invested">0.00</span></h2>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Recent Transactions</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Type</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Plan</th>
                                </tr>
                            </thead>
                            <tbody id="transactions-table">
                                <tr>
                                    <td colspan="5" class="text-center">No transactions yet</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="card mb-4">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0">Referral Program</h5>
                        </div>
                        <div class="card-body">
                            <p>Earn 5% commission on every deposit made by your referrals</p>
                            <div class="input-group mb-3">
                                <input type="text" class="form-control" id="referral-link" value="" readonly>
                                <button class="btn btn-outline-secondary" type="button" id="copy-referral-btn">
                                    <i class="bi bi-clipboard"></i> Copy
                                </button>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Your Referrals: <span id="referral-count">0</span></h6>
                                </div>
                                <div class="col-md-6">
                                    <h6>Referral Earnings: $<span id="referral-earnings">0.00</span></h6>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0">Your Team</h5>
                        </div>
                        <div class="card-body">
                            <div id="team-list" class="mb-3" style="max-height: 200px; overflow-y: auto;">
                                <p class="text-center">No team members yet</p>
                            </div>
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle me-2"></i>
                                Team members will appear here after they register using your referral code and make their first deposit.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Deposit Content -->
    <div id="deposit-content" class="tab-content" style="display: none;">
        <div class="container py-5">
            <h2 class="fw-bold mb-4">Make Deposit</h2>
            <div class="row">
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0">Deposit via USDT (TRC20)</h5>
                        </div>
                        <div class="card-body">
                            <form id="deposit-form">
                                <div class="mb-3">
                                    <label for="deposit-amount" class="form-label">Amount (Minimum $50)</label>
                                    <input type="number" class="form-control" id="deposit-amount" min="50" required>
                                </div>
                                <div class="mb-3">
                                    <label for="selected-plan" class="form-label">Selected Plan</label>
                                    <input type="text" class="form-control" id="selected-plan" readonly>
                                    <small class="text-muted">Select a plan from the home page or <a href="#" id="change-plan-link">change plan</a></small>
                                </div>
                                <div class="mb-3">
                                    <label for="okx-id" class="form-label">Your OKX ID (Optional)</label>
                                    <input type="text" class="form-control" id="okx-id" placeholder="Enter your OKX ID">
                                </div>
                                <div class="alert alert-info">
                                    <h6>Send USDT (TRC20) to:</h6>
                                    <p class="fw-bold mb-1" id="deposit-address">TKNdjRambuwgd2m6CpXnQMaTsazyZFz3hK</p>
                                    <p class="small mb-0">Network: TRON TRC20 (TRC20)</p>
                                </div>
                                <div class="mb-3">
                                    <label for="transaction-hash" class="form-label">Transaction Hash</label>
                                    <input type="text" class="form-control" id="transaction-hash" placeholder="Enter your transaction hash" required>
                                    <div class="form-text">After sending USDT, paste the transaction hash here</div>
                                </div>
                                <button type="submit" class="btn btn-success w-100">Submit Deposit</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Deposit Instructions</h5>
                        </div>
                        <div class="card-body">
                            <ol class="list-group list-group-numbered">
                                <li class="list-group-item">Enter deposit amount (minimum $50)</li>
                                <li class="list-group-item">Send exact USDT amount to the TRC20 address shown</li>
                                <li class="list-group-item">After transaction is completed, paste the transaction hash</li>
                                <li class="list-group-item">Click "Submit Deposit"</li>
                                <li class="list-group-item">Your deposit will be verified and ROI will start automatically</li>
                            </ol>
                            <div class="alert alert-warning mt-3">
                                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                <strong>Important:</strong> Only send USDT via TRC20 network. Sending via other networks may result in permanent loss.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Withdraw Content -->
    <div id="withdraw-content" class="tab-content" style="display: none;">
        <div class="container py-5">
            <h2 class="fw-bold mb-4">Request Withdrawal</h2>
            <div class="row">
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header bg-warning text-white">
                            <h5 class="mb-0">Withdraw Funds</h5>
                        </div>
                        <div class="card-body">
                            <form id="withdraw-form">
                                <div class="mb-3">
                                    <label for="withdraw-amount" class="form-label">Amount (Minimum $10)</label>
                                    <input type="number" class="form-control" id="withdraw-amount" min="10" required>
                                </div>
                                <div class="mb-3">
                                    <label for="withdraw-address" class="form-label">USDT (TRC20 Wallet Address</label>
                                    <input type="text" class="form-control" id="withdraw-address" placeholder="Enter your TRC20 wallet address" required>
                                </div>
                                <button type="submit" class="btn btn-warning w-100">Request Withdrawal</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Withdrawal Process</h5>
                        </div>
                        <div class="card-body">
                            <ol class="list-group list-group-numbered">
                                <li class="list-group-item">Enter withdrawal amount (minimum $10)</li>
                                <li class="list-group-item">Provide your USDT (TRC20) wallet address</li>
                                <li class="list-group-item">Submit withdrawal request</li>
                                <li class="list-group-item">Contact our Telegram support with your transaction details</li>
                                <li class="list-group-item">Your withdrawal will be processed within 24 hours</li>
                            </ol>
                            <div class="alert alert-info mt-3">
                                <i class="bi bi-telegram me-2"></i>
                                <strong>Telegram Support:</strong> <a href="https://t.me/nafanest_support" target="_blank">@nafanest_support</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Support Content -->
    <div id="support-content" class="tab-content" style="display: none;">
        <div class="container py-5">
            <h2 class="fw-bold mb-4">Customer Support</h2>
            <div class="row">
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header bg-danger text-white">
                            <h5 class="mb-0">Contact Us</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-4">
                                <h5><i class="bi bi-telegram me-2"></i> Telegram Support</h5>
                                <p>For fastest response, contact our Telegram support:</p>
                                <a href="https://t.me/nafanest_support" class="btn btn-primary" target="_blank">
                                    <i class="bi bi-telegram me-2"></i> @nafanest_support
                                </a>
                            </div>
                            <div class="mb-4">
                                <h5><i class="bi bi-envelope me-2"></i> Email Support</h5>
                                <p>For general inquiries:</p>
                                <a href="mailto:support@nafanest.com" class="btn btn-outline-secondary">
                                    <i class="bi bi-envelope me-2"></i> support@nafanest.com
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">FAQs</h5>
                        </div>
                        <div class="card-body">
                            <div class="accordion" id="faqAccordion">
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                            How do I start earning?
                                        </button>
                                    </h2>
                                    <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            Make a minimum deposit of $50 USDT (TRC20) and your daily ROI will start automatically after transaction confirmation.
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                            When can I withdraw my profits?
                                        </button>
                                    </h2>
                                    <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            You can withdraw your profits anytime with a minimum withdrawal amount of $10. Withdrawals are processed within 24 hours.
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                            How does the referral program work?
                                        </button>
                                    </h2>
                                    <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            You earn 5% commission on every deposit made by your referrals. Your referral link can be found in your dashboard.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Content -->
    <div id="login-content" class="tab-content" style="display: none;">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">Login to Your Account</h5>
                        </div>
                        <div class="card-body">
                            <form id="login-form">
                                <div class="mb-3">
                                    <label for="login-email" class="form-label">Email Address</label>
                                    <input type="email" class="form-control" id="login-email" required>
                                </div>
                                <div class="mb-3">
                                    <label for="login-password" class="form-label">Password</label>
                                    <input type="password" class="form-control" id="login-password" required>
                                </div>
                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="remember-me">
                                    <label class="form-check-label" for="remember-me">Remember me</label>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Login</button>
                            </form>
                            <div class="text-center mt-3">
                                <p>Don't have an account? <a href="#" id="register-link">Register here</a></p>
                                <p><a href="#" id="forgot-password-link">Forgot password?</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Content -->
    <div id="register-content" class="tab-content" style="display: none;">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0">Create New Account</h5>
                        </div>
                        <div class="card-body">
                            <div class="referral-success" id="referral-success">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span id="referral-success-msg"></span>
                            </div>
                            <div class="referral-error" id="referral-error">
                                <i class="bi bi-exclamation-circle-fill text-danger me-2"></i>
                                <span id="referral-error-msg"></span>
                            </div>
                            <form id="register-form">
                                <div class="mb-3">
                                    <label for="register-email" class="form-label">Email Address</label>
                                    <input type="email" class="form-control" id="register-email" required>
                                </div>
                                <div class="mb-3">
                                    <label for="register-password" class="form-label">Password</label>
                                    <input type="password" class="form-control" id="register-password" required>
                                </div>
                                <div class="mb-3">
                                    <label for="register-confirm-password" class="form-label">Confirm Password</label>
                                    <input type="password" class="form-control" id="register-confirm-password" required>
                                </div>
                                <div class="mb-3">
                                    <label for="referral-code" class="form-label">Referral Code (Optional)</label>
                                    <input type="text" class="form-control" id="referral-code" placeholder="Enter referral code if any">
                                </div>
                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="agree-terms" required>
                                    <label class="form-check-label" for="agree-terms">I agree to the <a href="#">Terms and Conditions</a></label>
                                </div>
                                <button type="submit" class="btn btn-success w-100">Register</button>
                            </form>
                            <div class="text-center mt-3">
                                <p>Already have an account? <a href="#" id="login-link">Login here</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // User management system
        const users = JSON.parse(localStorage.getItem('nafanest_users')) || [];
        let currentUser = JSON.parse(localStorage.getItem('nafanest_current_user')) || null;
        let selectedPlan = localStorage.getItem('nafanest_selected_plan') || null;
        let referralEmail = null;

        // Plan details
        const plans = {
            basic: {
                name: "Basic Plan",
                min: 50,
                max: 499,
                dailyRoiMin: 1.2,
                dailyRoiMax: 1.5,
                duration: 30
            },
            premium: {
                name: "Premium Plan",
                min: 500,
                max: 4999,
                dailyRoiMin: 1.8,
                dailyRoiMax: 2.2,
                duration: 45
            },
            vip: {
                name: "VIP Plan",
                min: 5000,
                max: 100000,
                dailyRoiMin: 2.5,
                dailyRoiMax: 3.0,
                duration: 60
            }
        };

        // Initialize the UI based on login state
        function updateUI() {
            if (currentUser) {
                // User is logged in
                document.getElementById('login-tab').style.display = 'none';
                document.getElementById('register-tab').style.display = 'none';
                document.getElementById('logout-btn').style.display = 'block';
                
                // Show dashboard by default for logged in users
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.style.display = 'none';
                });
                document.getElementById('dashboard-content').style.display = 'block';
                document.querySelectorAll('.nav-link').forEach(navLink => {
                    navLink.classList.remove('active');
                });
                document.getElementById('dashboard-tab').classList.add('active');
                
                // Update dashboard with user data
                document.getElementById('total-balance').textContent = currentUser.balance ? currentUser.balance.toFixed(2) : '0.00';
                document.getElementById('daily-profit').textContent = currentUser.dailyProfit ? currentUser.dailyProfit.toFixed(2) : '0.00';
                document.getElementById('team-earnings').textContent = currentUser.teamEarnings ? currentUser.teamEarnings.toFixed(2) : '0.00';
                document.getElementById('total-invested').textContent = currentUser.totalInvested ? currentUser.totalInvested.toFixed(2) : '0.00';
                document.getElementById('referral-earnings').textContent = currentUser.referralEarnings ? currentUser.referralEarnings.toFixed(2) : '0.00';
                document.getElementById('referral-count').textContent = currentUser.teamMembers ? currentUser.teamMembers.length : '0';
                
                // Update referral link with user's referral code
                const referralLink = `${window.location.origin}${window.location.pathname}?ref=${encodeURIComponent(currentUser.referralCode)}`;
                document.getElementById('referral-link').value = referralLink;
                
                // Update transactions
                updateTransactions();
                
                // Update team members list
                updateTeamList();
            } else {
                // User is logged out
                document.getElementById('login-tab').style.display = 'block';
                document.getElementById('register-tab').style.display = 'block';
                document.getElementById('logout-btn').style.display = 'none';
                
                // Show home by default for logged out users
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.style.display = 'none';
                });
                document.getElementById('home-content').style.display = 'block';
                document.querySelectorAll('.nav-link').forEach(navLink => {
                    navLink.classList.remove('active');
                });
                document.getElementById('home-tab').classList.add('active');
            }
            
            // Update selected plan in deposit form if exists
            if (selectedPlan) {
                document.getElementById('selected-plan').value = plans[selectedPlan].name;
            }
        }
        
        // Update transactions in dashboard
        function updateTransactions() {
            const transactionsTable = document.getElementById('transactions-table');
            if (!currentUser.transactions || currentUser.transactions.length === 0) {
                transactionsTable.innerHTML = `<tr><td colspan="5" class="text-center">No transactions yet</td></tr>`;
                return;
            }
            
            let transactionsHtml = '';
            currentUser.transactions.forEach(transaction => {
                transactionsHtml += `
                    <tr>
                        <td>${transaction.date}</td>
                        <td>${transaction.type}</td>
                        <td>$${transaction.amount.toFixed(2)}</td>
                        <td><span class="badge ${transaction.status === 'Completed' ? 'bg-success' : 'bg-warning'}">${transaction.status}</span></td>
                        <td>${transaction.plan || '-'}</td>
                    </tr>
                `;
            });
            
            transactionsTable.innerHTML = transactionsHtml;
        }
        
        // Update team members list
        function updateTeamList() {
            const teamList = document.getElementById('team-list');
            if (!currentUser.teamMembers || currentUser.teamMembers.length === 0) {
                teamList.innerHTML = `<p class="text-center">No team members yet</p>`;
                return;
            }
            
            let teamHtml = '';
            currentUser.teamMembers.forEach(member => {
                teamHtml += `
                    <div class="team-member ${member.active ? 'active' : ''}">
                        <div class="d-flex justify-content-between">
                            <strong>${member.email}</strong>
                            <span>$${member.totalDeposited ? member.totalDeposited.toFixed(2) : '0.00'}</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <small>Joined: ${member.joinDate}</small>
                            <span class="referral-status">${member.active ? 'Active' : 'Pending Deposit'}</span>
                        </div>
                    </div>
                `;
            });
            
            teamList.innerHTML = teamHtml;
        }

        // Register form submission
        document.getElementById('register-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const referralCode = document.getElementById('referral-code').value;
            
            // Validate passwords match
            if (password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }
            
            // Check if user already exists
            if (users.find(user => user.email === email)) {
                alert('User with this email already exists!');
                return;
            }
            
            // Create new user
            const newUser = {
                email,
                password,
                balance: 0,
                dailyProfit: 0,
                teamEarnings: 0,
                referralEarnings: 0,
                totalInvested: 0,
                referralCode: generateReferralCode(email),
                teamMembers: [],
                transactions: [],
                activeInvestments: []
            };
            
            // Handle referral if code is provided
            let referrer = null;
            if (referralCode) {
                // Try to find referrer by referral code
                referrer = users.find(user => user.referralCode === referralCode);
                
                // If not found by code, try to find by email (for backward compatibility)
                if (!referrer && referralEmail) {
                    referrer = users.find(user => user.email === referralEmail);
                }
                
                if (referrer) {
                    // Add user to referrer's team
                    referrer.teamMembers.push({
                        email,
                        joinDate: new Date().toLocaleDateString(),
                        totalDeposited: 0,
                        active: false
                    });
                    
                    // Update referrer in users array
                    const referrerIndex = users.findIndex(user => user.email === referrer.email);
                    users[referrerIndex] = referrer;
                    
                    // Set referrer for new user
                    newUser.referrer = referrer.email;
                    
                    // Show success message
                    document.getElementById('referral-success').style.display = 'block';
                    document.getElementById('referral-success-msg').textContent = `You have been referred by ${referrer.email}`;
                } else {
                    document.getElementById('referral-error').style.display = 'block';
                    document.getElementById('referral-error-msg').textContent = 'Invalid referral code. Please check and try again.';
                    return;
                }
            }
            
            users.push(newUser);
            localStorage.setItem('nafanest_users', JSON.stringify(users));
            
            // Log in the new user
            currentUser = newUser;
            localStorage.setItem('nafanest_current_user', JSON.stringify(currentUser));
            
            alert('Registration successful! You are now logged in.');
            updateUI();
            this.reset();
            
            // Switch to dashboard
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById('dashboard-content').style.display = 'block';
            document.querySelectorAll('.nav-link').forEach(navLink => {
                navLink.classList.remove('active');
            });
            document.getElementById('dashboard-tab').classList.add('active');
        });
        
        // Generate referral code from email
        function generateReferralCode(email) {
            // Simple hash to create referral code
            let hash = 0;
            for (let i = 0; i < email.length; i++) {
                hash = (hash << 5) - hash + email.charCodeAt(i);
                hash |= 0; // Convert to 32bit integer
            }
            return 'REF' + Math.abs(hash).toString().substring(0, 8);
        }

        // Login form submission
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const rememberMe = document.getElementById('remember-me').checked;
            
            // Find user
            const user = users.find(user => user.email === email && user.password === password);
            
            if (!user) {
                alert('Invalid email or password!');
                return;
            }
            
            // Log in the user
            currentUser = user;
            localStorage.setItem('nafanest_current_user', JSON.stringify(currentUser));
            
            if (rememberMe) {
                localStorage.setItem('nafanest_remember_me', 'true');
            } else {
                localStorage.removeItem('nafanest_remember_me');
            }
            
            alert('Login successful!');
            updateUI();
            this.reset();
            
            // Switch to dashboard
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById('dashboard-content').style.display = 'block';
            document.querySelectorAll('.nav-link').forEach(navLink => {
                navLink.classList.remove('active');
            });
            document.getElementById('dashboard-tab').classList.add('active');
        });

        // Logout functionality
        document.getElementById('logout-btn').addEventListener('click', function(e) {
            e.preventDefault();
            
            currentUser = null;
            localStorage.removeItem('nafanest_current_user');
            
            alert('You have been logged out.');
            updateUI();
        });

        // Tab switching functionality
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const tabId = this.id.replace('-tab', '-content');
                
                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.style.display = 'none';
                });
                
                // Show selected tab content
                document.getElementById(tabId).style.display = 'block';
                
                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(navLink => {
                    navLink.classList.remove('active');
                });
                this.classList.add('active');
            });
        });

        // Plan selection functionality
        document.querySelectorAll('.select-plan-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                const plan = this.getAttribute('data-plan');
                
                // Highlight selected plan
                document.querySelectorAll('.plan-card').forEach(card => {
                    card.classList.remove('plan-selected');
                });
                document.getElementById(`${plan}-plan`).classList.add('plan-selected');
                
                // Store selected plan
                selectedPlan = plan;
                localStorage.setItem('nafanest_selected_plan', plan);
                
                // Update deposit form
                document.getElementById('selected-plan').value = plans[plan].name;
                
                // Switch to deposit tab
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.style.display = 'none';
                });
                document.getElementById('deposit-content').style.display = 'block';
                document.querySelectorAll('.nav-link').forEach(navLink => {
                    navLink.classList.remove('active');
                });
                document.getElementById('deposit-tab').classList.add('active');
                
                // Set minimum deposit amount based on plan
                document.getElementById('deposit-amount').min = plans[plan].min;
            });
        });

        // Change plan link
        document.getElementById('change-plan-link').addEventListener('click', function(e) {
            e.preventDefault();
            
            // Switch to home tab to select plan
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById('home-content').style.display = 'block';
            document.querySelectorAll('.nav-link').forEach(navLink => {
                navLink.classList.remove('active');
            });
            document.getElementById('home-tab').classList.add('active');
            
            // Scroll to plans section
            document.querySelector('.hero-section').scrollIntoView({
                behavior: 'smooth'
            });
        });

        // Special buttons that switch tabs
        document.getElementById('register-hero-btn').addEventListener('click', function(e) {
            e.preventDefault();
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById('register-content').style.display = 'block';
            document.querySelectorAll('.nav-link').forEach(navLink => {
                navLink.classList.remove('active');
            });
            document.getElementById('register-tab').classList.add('active');
        });

        document.getElementById('login-hero-btn').addEventListener('click', function(e) {
            e.preventDefault();
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById('login-content').style.display = 'block';
            document.querySelectorAll('.nav-link').forEach(navLink => {
                navLink.classList.remove('active');
            });
            document.getElementById('login-tab').classList.add('active');
        });

        // Links between login and register forms
        document.getElementById('register-link').addEventListener('click', function(e) {
            e.preventDefault();
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById('register-content').style.display = 'block';
            document.querySelectorAll('.nav-link').forEach(navLink => {
                navLink.classList.remove('active');
            });
            document.getElementById('register-tab').classList.add('active');
        });

        document.getElementById('login-link').addEventListener('click', function(e) {
            e.preventDefault();
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById('login-content').style.display = 'block';
            document.querySelectorAll('.nav-link').forEach(navLink => {
                navLink.classList.remove('active');
            });
            document.getElementById('login-tab').classList.add('active');
        });

        // Copy referral link
        document.getElementById('copy-referral-btn').addEventListener('click', function() {
            const referralInput = document.getElementById('referral-link');
            referralInput.select();
            document.execCommand('copy');
            alert('Referral link copied to clipboard!');
        });

        // Form submissions (simplified for demo)
        document.getElementById('deposit-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const amount = parseFloat(document.getElementById('deposit-amount').value);
            const txHash = document.getElementById('transaction-hash').value;
            
            if (!selectedPlan) {
                alert('Please select an investment plan first');
                return;
            }
            
            if (amount < plans[selectedPlan].min) {
                alert(`Minimum deposit for ${plans[selectedPlan].name} is $${plans[selectedPlan].min}`);
                return;
            }
            
            if (amount > plans[selectedPlan].max) {
                alert(`Maximum deposit for ${plans[selectedPlan].name} is $${plans[selectedPlan].max}`);
                return;
            }
            
            if (!txHash) {
                alert('Please enter your transaction hash');
                return;
            }
            
            if (currentUser) {
                // Update user balance
                currentUser.balance = (parseFloat(currentUser.balance) || 0) + amount;
                currentUser.totalInvested = (parseFloat(currentUser.totalInvested) || 0) + amount;
                
                // Add active investment
                const dailyRoi = plans[selectedPlan].dailyRoiMin + 
                    (Math.random() * (plans[selectedPlan].dailyRoiMax - plans[selectedPlan].dailyRoiMin));
                
                currentUser.activeInvestments.push({
                    plan: selectedPlan,
                    amount: amount,
                    startDate: new Date().toLocaleDateString(),
                    endDate: new Date(Date.now() + plans[selectedPlan].duration * 24 * 60 * 60 * 1000).toLocaleDateString(),
                    dailyRoi: dailyRoi,
                    daysRemaining: plans[selectedPlan].duration
                });
                
                // Add transaction
                currentUser.transactions.push({
                    date: new Date().toLocaleDateString(),
                    type: 'Deposit',
                    amount: amount,
                    status: 'Completed',
                    plan: plans[selectedPlan].name
                });
                
                // Find referrer and add commission
                if (currentUser.referrer) {
                    const referrer = users.find(user => user.email === currentUser.referrer);
                    if (referrer) {
                        const commission = amount * 0.05; // 5% commission
                        referrer.balance = (parseFloat(referrer.balance) || 0) + commission;
                        referrer.teamEarnings = (parseFloat(referrer.teamEarnings) || 0) + commission;
                        referrer.referralEarnings = (parseFloat(referrer.referralEarnings) || 0) + commission;
                        
                        // Update referrer's team member status
                        const memberIndex = referrer.teamMembers.findIndex(m => m.email === currentUser.email);
                        if (memberIndex !== -1) {
                            referrer.teamMembers[memberIndex].active = true;
                            referrer.teamMembers[memberIndex].totalDeposited = 
                                (parseFloat(referrer.teamMembers[memberIndex].totalDeposited) || 0) + amount;
                        }
                        
                        // Update referrer in users array
                        const referrerIndex = users.findIndex(user => user.email === referrer.email);
                        users[referrerIndex] = referrer;
                        
                        // Add commission transaction for referrer
                        referrer.transactions.push({
                            date: new Date().toLocaleDateString(),
                            type: 'Referral Commission',
                            amount: commission,
                            status: 'Completed'
                        });
                    }
                }
                
                // Save changes
                const userIndex = users.findIndex(user => user.email === currentUser.email);
                users[userIndex] = currentUser;
                localStorage.setItem('nafanest_users', JSON.stringify(users));
                localStorage.setItem('nafanest_current_user', JSON.stringify(currentUser));
                
                updateUI();
            }
            
            alert(`Deposit of $${amount} submitted for ${plans[selectedPlan].name}! Your investment is now active.`);
            this.reset();
            selectedPlan = null;
            localStorage.removeItem('nafanest_selected_plan');
            document.getElementById('selected-plan').value = '';
        });

        document.getElementById('withdraw-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const amount = parseFloat(document.getElementById('withdraw-amount').value);
            const address = document.getElementById('withdraw-address').value;
            
            if (currentUser) {
                if (amount > parseFloat(currentUser.balance)) {
                    alert('Insufficient balance for this withdrawal');
                    return;
                }
                
                if (amount < 10) {
                    alert('Minimum withdrawal amount is $10');
                    return;
                }
                
                // Update user balance
                currentUser.balance = (parseFloat(currentUser.balance) || 0) - amount;
                
                // Add transaction
                currentUser.transactions.push({
                    date: new Date().toLocaleDateString(),
                    type: 'Withdrawal',
                    amount: amount,
                    status: 'Pending'
                });
                
                // Save changes
                const userIndex = users.findIndex(user => user.email === currentUser.email);
                users[userIndex] = currentUser;
                localStorage.setItem('nafanest_users', JSON.stringify(users));
                localStorage.setItem('nafanest_current_user', JSON.stringify(currentUser));
                
                updateUI();
            }
            
            alert(`Withdrawal request of $${amount} submitted! Please contact our Telegram support with your transaction details.`);
            this.reset();
        });

        // Check for referral code in URL on page load
        function checkForReferralCode() {
            const urlParams = new URLSearchParams(window.location.search);
            const refParam = urlParams.get('ref');
            
            if (refParam) {
                // Try to find if refParam is a valid referral code
                const referrer = users.find(user => user.referralCode === refParam);
                
                if (referrer) {
                    // Set the referral code in the form
                    document.getElementById('referral-code').value = refParam;
                    referralEmail = referrer.email;
                    
                    // If we're not on register page, switch to it
                    if (!window.location.hash.includes('register-content')) {
                        document.querySelectorAll('.tab-content').forEach(content => {
                            content.style.display = 'none';
                        });
                        document.getElementById('register-content').style.display = 'block';
                        document.querySelectorAll('.nav-link').forEach(navLink => {
                            navLink.classList.remove('active');
                        });
                        document.getElementById('register-tab').classList.add('active');
                    }
                    
                    // Show success message
                    document.getElementById('referral-success').style.display = 'block';
                    document.getElementById('referral-success-msg').textContent = `You have been referred by ${referrer.email}`;
                } else {
                    // If not found by code, try by email
                    const referrerByEmail = users.find(user => user.email === refParam);
                    if (referrerByEmail) {
                        // Set the referral code in the form
                        document.getElementById('referral-code').value = referrerByEmail.referralCode;
                        referralEmail = referrerByEmail.email;
                        
                        // If we're not on register page, switch to it
                        if (!window.location.hash.includes('register-content')) {
                            document.querySelectorAll('.tab-content').forEach(content => {
                                content.style.display = 'none';
                            });
                            document.getElementById('register-content').style.display = 'block';
                            document.querySelectorAll('.nav-link').forEach(navLink => {
                                navLink.classList.remove('active');
                            });
                            document.getElementById('register-tab').classList.add('active');
                        }
                        
                        // Show success message
                        document.getElementById('referral-success').style.display = 'block';
                        document.getElementById('referral-success-msg').textContent = `You have been referred by ${referrerByEmail.email}`;
                    } else {
                        // If not found at all, show error message
                        document.getElementById('referral-error').style.display = 'block';
                        document.getElementById('referral-error-msg').textContent = 'Invalid referral code. Please check the link.';
                    }
                }
            }
        }

        // Initialize the UI when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateUI();
            checkForReferralCode();
            
            // Check if there's a remembered user
            if (localStorage.getItem('nafanest_remember_me') && !currentUser) {
                // You could implement auto-login here if desired
            }
            
            // Simulate daily profit calculation (for demo purposes)
            if (currentUser && currentUser.activeInvestments && currentUser.activeInvestments.length > 0) {
                // Calculate daily profits
                let totalDailyProfit = 0;
                currentUser.activeInvestments.forEach(investment => {
                    if (investment.daysRemaining > 0) {
                        const dailyProfit = investment.amount * (investment.dailyRoi / 100);
                        totalDailyProfit += dailyProfit;
                        investment.daysRemaining--;
                    }
                });
                
                if (totalDailyProfit > 0) {
                    currentUser.balance = (parseFloat(currentUser.balance) || 0) + totalDailyProfit;
                    currentUser.dailyProfit = totalDailyProfit;
                    
                    // Add profit transaction
                    currentUser.transactions.push({
                        date: new Date().toLocaleDateString(),
                        type: 'Daily Profit',
                        amount: totalDailyProfit,
                        status: 'Completed'
                    });
                    
                    // Save changes
                    const userIndex = users.findIndex(user => user.email === currentUser.email);
                    users[userIndex] = currentUser;
                    localStorage.setItem('nafanest_users', JSON.stringify(users));
                    localStorage.setItem('nafanest_current_user', JSON.stringify(currentUser));
                    
                    updateUI();
                }
            }
        });
    </script>
</body>
</html>
